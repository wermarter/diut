<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      * {
        font-family: 'Times New Roman', monospace;
      }
    </style>
  </head>
  <body>
    <h1 class="text-5xl">Form HIV</h1>
    <div class="m-8">
      <p class="text-base">
        ID_XN: <span class="font-bold"> <%= sample.sampleId %> </span>
      </p>
      <p class="text-base">
        Họ và tên: <span class="font-bold"><%= patient.name %></span>
      </p>
      <p class="text-base">
        Địa chỉ: <span class="font-bold"><%= patient.address %></span>
      </p>
      <p class="text-base">
        Năm sinh: <span class="font-bold"><%= patient.birthYear %></span>
      </p>
      <p class="text-base">
        Giới tính:
        <span class="font-bold"
          ><%= patient.gender === 'male' ? "Nam" : "Nữ" %></span
        >
      </p>
      <p class="text-base">
        BS chỉ định: <span class="font-bold"><%= doctor %></span>
      </p>
      <p class="text-base">
        Chẩn đoán: <span class="font-bold"><%= indication %></span>
      </p>
      <p class="text-base">
        Đối tượng: <span class="font-bold"><%= patientType %></span>
      </p>
      <p class="text-base">
        Loại mẫu: <span class="font-bold"><%= sampleTypes.join(', ') %></span>
      </p>
      <p class="text-base">
        TG nhận bệnh:
        <span class="font-bold"><%= sample.infoAt.toLocaleString('vi') %></span>
      </p>
      <p class="text-base">
        TG lấy mẫu:
        <span class="font-bold"
          ><%= sample.sampledAt.toLocaleString('vi') %></span
        >
      </p>
      <hr />
      <table class="table-auto" style="width: 100%">
        <thead>
          <tr>
            <td>Xét nghiệm</td>
            <td>Kết quả</td>
            <td>Đơn vị</td>
            <td>Trị số tham chiếu</td>
          </tr>
        </thead>
        <tbody>
          <% results.forEach(category => { %>
          <tr>
            <td class="font-bold"><%= category.categoryName %></td>
          </tr>
          <% category.tests.forEach(test => { %>
          <tr>
            <td><%= test.name %></td>
          </tr>
          <% test.elements.forEach(element => { %>
          <tr>
            <td><%= element.name %></td>
            <td class="<%= element.isHighlighted ? 'font-bold' : '' %>">
              <%= element.value %>
            </td>
            <td><%= element.unit %></td>
            <td><%= element.description %></td>
          </tr>
          <% }) %> <% }) %> <% }) %>
        </tbody>
      </table>
    </div>
  </body>
</html>
