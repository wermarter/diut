<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          // extend: {
          //   fontSize: {
          //     sm: '0.8rem',
          //     base: '1rem',
          //     xl: '1.25rem',
          //     '2xl': '1.563rem',
          //     '3xl': '1.953rem',
          //     '4xl': '2.441rem',
          //     '5xl': '3.052rem',
          //   },
          // },
        },
      }
    </script>
    <style>
      * {
        font-family: 'Times New Roman', monospace;
      }
      html {
        font-size: 15px;
      }
      @page {
        margin-top: 5mm;
        margin-bottom: 7mm;
        margin-left: 20mm;
        margin-right: 10mm;
      }
      p {
        page-break-inside: avoid;
      }
      .print-footer {
        position: fixed;
        bottom: 0;
        font-size: 10px;
      }
    </style>
  </head>
  <body>
    <div class="flex flex-row items-center">
      <img
        src="http://localhost:9000/public/galant.png"
        style="width: 150px; object-fit: contain"
      />
      <div class="ml-4 text-base">
        <p class="font-bold">
          CN CÔNG TY TNHH PHÁT TRIỂN SÁNG KIẾN HỖ TRỢ CỘNG ĐỒNG G3VN - PHÒNG XÉT NGHIỆM GALANT
        </p>
        <p>
          Số 417/21 Quang Trung, P.10, Quận Gò Vấp, TP.HCM
        </p>
        <p>
          Hotline/Zalo/Viper: 0906 200 902  Tel: 028 7305 1869
        </p>
      </div>
    </div>
    <div class="flex flex-row justify-between my-4 mr-12">
      <div class="mt-1">
        <p class="text-base">　</p>
        <p class="text-base">
          Họ và tên: <span class="font-bold"><%= patient.name %></span>
        </p>
        <p class="text-base">Địa chỉ: <span><%= patient.address %></span></p>
        <p class="text-base">Chỉ định: <span><%= doctor %></span></p>
        <p class="text-base">Chẩn đoán: <span><%= indication %></span></p>
      </div>
      <div class="flex flex-col justify-between" style="max-width: 250px">
        <div>
          <p class="text-base">
            ID: <span class="font-bold"> <%= sample.sampleId %> </span>
          </p>
        </div>
        <div>
          <p class="text-base">
            Năm sinh: <span class="font-bold"><%= patient.birthYear %></span>
          </p>
          <p class="text-base">Giới tính:
            <span class="font-bold"
              ><%= patient.gender === 0 ? "Nam" : "Nữ" %></span
            ></span></p>
          <p class="text-base">
            Loại mẫu:
            <span> Tinh dịch </span>
          </p>
          <p class="text-base">
            Ngày XN:
            <span
              ><%= new
              Date(results[0].tests[0].elements[0].value).toLocaleDateString('vi')
              %></span
            >
          </p>
        </div>
      </div>
    </div>
    <h1 class="text-xl font-bold text-center my-4">
      PHIẾU KẾT QUẢ XÉT NGHIỆM / TEST RESULTS
    </h1>
    <table class="w-full">
      <thead class="bg-gray-100 text-sm">
        <tr>
          <th scope="col" class="py-1 px-6 border border-gray-300">
            Tên Xét nghiệm
          </th>
          <th scope="col" class="py-1 px-6 border border-gray-300" width="15%">
            Kết quả
          </th>
          <th scope="col" class="py-1 px-6 border border-gray-300" width="13%">
            Đơn vị
          </th>
          <th scope="col" class="py-1 px-6 border border-gray-300" width="22%">
            Chuẩn tham khảo <span class="whitespace-nowrap"> (WHO 2010) </span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border border-gray-300">
          <td class="py-1 pl-2 font-bold"><%= results[0].tests[0].name %></td>
        </tr>
        <% results[0].tests[0].elements.slice(1, -1).forEach(element => { %>
        <tr class="border border-gray-300">
          <td class="py-1 pl-6 border border-gray-300">
            - <%= element.name %>
          </td>
          <td
            class="py-1 text-center border border-gray-300 <%= element.isHighlighted ? 'font-bold' : '' %>"
          >
            <%= element.value %>
          </td>
          <td class="py-1 text-center pl-2 border border-gray-300">
            <%= element.unit %>
          </td>
          <td class="py-1 text-center pl-2 border border-gray-300">
            <%= element.description %>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
    <p class="text-base mt-1 ml-8">
      <span><%= results[0].tests[0].elements.slice(-1)[0].name %>:</span>
      <span><%= results[0].tests[0].elements.slice(-1)[0].value ?? '' %></span>
    </p>
    <div
      class="flex flex-row justify-end mt-10"
      style="page-break-inside: avoid"
    >
      <div class="flex flex-col text-center mr-12">
        <p>
          Ngày <%= new Date().getDate() %> tháng <%= new Date().getMonth() + 1
          %> năm <%= new Date().getFullYear() %>
        </p>
        <p class="font-bold"><%= authorPosition %></p>
        <p style="margin-top: 20mm" class="font-bold"><%= authorName %></p>
      </div>
    </div>
  </body>
</html>
